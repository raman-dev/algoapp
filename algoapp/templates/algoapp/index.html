{% extends "algoapp/base.html" %}

{% block content %}
<script>
    $(document).ready(() => {
        $("#runFullAlgo").on("click", () => {
            //need to access and store data of the current points
            //check which is active
            active_id = $("li.active").attr('id');
            if (active_id == "dijkstras") {
                var data = d3.select("svg").selectAll("circle").data();
            } else if (active_id == "quickhull") {
                if (!isAnimating) {
                    clearLines();
                    //don't reshuffle
                    //state => 
                    //old board
                    //hit run=> rerun on old data
                    var data = d3.selectAll("svg").selectAll("circle")
                        .style('fill', 'white')
                        .attr("stroke", 'black')
                        .data();
                    convex_hull(data);
                }
            } else if (active_id == "johnson_trotter") {
                //grab default text and run
                //perform ajax call send text to server
                //and the print response
                text = $("#permutation_input").val();
                if (text.length > 0) {
                    console.log("perm_in => " + text);
                    $.ajax({
                        url: '/permutations/' + text + '/',
                        type: 'get',
                        success: (data) => {
                            console.log('success')
                            console.log(data);
                        },
                        failure: (data) => {
                            console.log('failure')
                            console.log(data);
                        }
                    });
                }
                //reSort();
                d3.select("#permutationContainer")
                .selectAll(".data").transition("left",100);
                console.log("Permutation!");
            }
        });
    });

    /*function reSort() {
        d3.select("#permutationContainer")
        .selectAll("div.data")
        .sort(function (a, b) {
            return d3.ascending(Math.random(), Math.random());
        }).transition().duration(1000).style(
                "left",function (d, i) {
                    return 60 + ((i * 30)) + "px";
                }
            )
    }*/
</script>

<div class="row">
    <svg width="720" height="480">
    </svg>
</div>
<div class="row fixed-bottom justify-content-end">
    <div class="col-lg-2 col-md-2">
        <div class="btn-group" role="group">
            <button id="runFullAlgo" class="btn btn-primary" type="button">
                Run
            </button>
        </div>
    </div>

</div>


{% endblock %}